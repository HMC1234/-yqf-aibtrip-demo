# 📱 移动端测试指南

## 🚀 快速开始

### 方式1：PWA安装（推荐，最简单）⭐

**步骤**：

1. **等待自动部署**（通常2-5分钟）
   - Vercel自动部署：https://yqf-aibtrip-demo.vercel.app
   - 腾讯云自动部署：您的自定义域名

2. **Android手机**：
   - 打开Chrome浏览器
   - 访问网站地址
   - 点击浏览器右上角菜单（三个点 ⋮）
   - 选择"添加到主屏幕"或"安装应用"
   - 点击"添加"或"安装"
   - 桌面会出现"一起飞商旅"图标

3. **iPhone/iPad**：
   - 打开Safari浏览器
   - 访问网站地址
   - 点击底部分享按钮（方框向上箭头）
   - 向下滚动，选择"添加到主屏幕"
   - 输入应用名称（或保持默认）
   - 点击"添加"
   - 桌面会出现"一起飞商旅"图标

4. **测试**：
   - 点击桌面图标启动应用
   - 应该显示独立的应用窗口（无浏览器地址栏）
   - 测试所有功能是否正常

---

### 方式2：安装APK文件（需要Android Studio）

如果您需要安装APK文件进行测试，请按照以下步骤：

#### 步骤1：打包APK

```bash
# 1. 确保已构建
npm run build

# 2. 安装Android平台（首次）
npm install @capacitor/android

# 3. 添加Android平台
npm run cap:add:android

# 4. 同步配置
npm run cap:sync

# 5. 打开Android Studio
npm run cap:open:android
```

#### 步骤2：在Android Studio中打包

1. **打开Android Studio**
   - 等待项目同步完成
   - 等待Gradle构建完成

2. **生成签名APK**：
   - 点击菜单：`Build` → `Generate Signed Bundle / APK`
   - 选择 `APK`
   - 点击 `Create new...` 创建新的密钥库
   
3. **创建签名密钥**（首次需要）：
   - Key store path: 选择保存位置（如：`C:\yqf-aibtrip-key.jks`）
   - Password: 设置密码（请记住！）
   - Key alias: `yqf-aibtrip-key`
   - Password: 密钥密码（可以与密钥库密码相同）
   - Validity: 25 years
   - 填写证书信息（姓名、组织等）
   - 点击 `OK` 创建

4. **生成APK**：
   - 选择刚创建的密钥库文件
   - 输入密码
   - 选择 `release` 构建变体
   - 点击 `Finish`
   - 等待构建完成

5. **找到APK文件**：
   - 构建完成后，APK在：`android\app\release\app-release.apk`
   - 将这个文件复制到手机上

#### 步骤3：在手机上安装APK

1. **传输APK到手机**：
   - 通过USB连接手机
   - 或者通过云盘/邮件发送
   - 或者使用 `adb install app-release.apk` 命令

2. **安装**：
   - 在手机上打开APK文件
   - 允许"来自未知来源"的安装（如有提示）
   - 点击"安装"
   - 安装完成后点击"打开"

---

## 📋 测试清单

### PWA功能测试

- [ ] **可安装性**
  - 浏览器显示"添加到主屏幕"提示
  - 可以成功添加到主屏幕
  - 桌面图标显示正确

- [ ] **独立窗口**
  - 点击图标后，应用在独立窗口打开
  - 没有浏览器地址栏
  - 显示模式为standalone

- [ ] **图标和启动画面**
  - 图标清晰可见
  - 启动画面正常显示
  - 主题色正确（紫色 #9333EA）

- [ ] **功能测试**
  - [ ] 登录功能正常
  - [ ] 首页加载正常
  - [ ] 出差申请功能正常
  - [ ] AI预订功能正常
  - [ ] 订单管理功能正常
  - [ ] 个人信息页面正常

- [ ] **离线功能**（Service Worker）
  - 首次访问后，离线状态下仍可访问部分功能
  - 静态资源已缓存

- [ ] **响应式设计**
  - 手机屏幕显示正常
  - 触摸操作流畅
  - 文字大小合适

### APK功能测试（如果打包了APK）

- [ ] **安装**
  - APK可以成功安装
  - 应用图标显示正确
  - 应用名称显示正确

- [ ] **启动**
  - 应用可以正常启动
  - 启动画面显示正常
  - 没有崩溃或错误

- [ ] **功能测试**（同上）

- [ ] **性能**
  - 应用响应速度快
  - 没有明显卡顿
  - 内存占用正常

---

## 🔗 访问地址

### Vercel部署地址
```
https://yqf-aibtrip-demo.vercel.app
```

### 腾讯云COS地址
```
您的自定义域名
或
https://yqf-aibtrip-demo-1387623418.cos-website.ap-guangzhou.myqcloud.com
```

---

## ⚠️ 注意事项

1. **HTTPS要求**：
   - PWA需要HTTPS才能正常工作
   - Vercel和腾讯云已配置HTTPS，无需担心

2. **浏览器要求**：
   - Android：推荐使用Chrome浏览器
   - iOS：必须使用Safari浏览器

3. **APK安装**：
   - Android需要允许"未知来源"应用安装
   - iOS需要企业证书或App Store发布

4. **测试账号**：
   - 使用测试账号登录
   - 测试各种功能场景

---

## 🐛 问题排查

### PWA无法安装

1. **检查HTTPS**：
   - 确保网站使用HTTPS（不是HTTP）

2. **检查manifest.json**：
   - 在浏览器开发者工具中查看是否加载成功
   - 检查图标路径是否正确

3. **清除浏览器缓存**：
   - 清除网站数据和缓存
   - 重新访问网站

### APK无法安装

1. **允许未知来源**：
   - Android设置 → 安全 → 允许安装未知来源应用

2. **检查APK签名**：
   - 确保APK已正确签名

3. **检查Android版本**：
   - 确保Android版本兼容（Android 5.0+）

---

## ✅ 完成检查

完成以下步骤后，表示测试准备就绪：

- [x] 代码已推送到GitHub
- [x] 自动部署已触发
- [x] 等待部署完成（2-5分钟）
- [ ] 访问部署地址确认网站正常
- [ ] 在手机上访问网站
- [ ] 添加到主屏幕
- [ ] 测试所有功能

---

## 📞 需要帮助？

如果遇到问题，请检查：
1. 部署是否成功（访问网站确认）
2. 浏览器控制台是否有错误
3. 网络连接是否正常
4. 是否使用HTTPS访问

祝测试顺利！🎉

