# 🚀 开始测试DEMO - 完整指南

## ✅ 准备工作已完成

所有代码文件已创建完成，现在可以开始测试！

---

## 📋 测试步骤（按顺序执行）

### 步骤1：安装Node.js（如果还没有）

1. 访问 https://nodejs.org/
2. 下载并安装 LTS 版本
3. 验证安装：
   ```bash
   node --version
   npm --version
   ```

---

### 步骤2：安装项目依赖

**在项目根目录执行**：

```bash
npm install
```

**预计时间**：2-5分钟（取决于网络速度）

**如果遇到错误**：
- 检查网络连接
- 尝试使用国内镜像：`npm install --registry=https://registry.npmmirror.com`

---

### 步骤3：启动项目

**方式1：使用一键启动脚本（推荐）**

**Windows用户**：
- 双击 `一键启动.bat` 文件

**Mac/Linux用户**：
```bash
chmod +x 一键启动.sh
./一键启动.sh
```

**方式2：手动启动**
```bash
npm start
```

**等待**：项目会自动打开浏览器，访问 http://localhost:3000

---

### 步骤4：登录系统

1. 在登录页面输入：
   - **Email**: `test@example.com`
   - **Password**: `123456`
2. 点击"登录"按钮
3. 应该成功进入首页

---

### 步骤5：提交出差申请

1. 点击"提交新申请"按钮
2. 填写表单：
   - **出发地**：北京
   - **目的地**：上海
   - **日期**：选择未来的日期（出发日期和回程日期）
   - **出差原因**：测试AI推荐功能，需要前往上海参加商务会议
   - **产品**：勾选"机票"和"酒店"
3. 点击"提交申请"
4. **记住申请单号**（例如：`BTRQ+JD+20241219143025+0001`）

---

### 步骤6：更新申请单状态（重要！）

要测试AI推荐功能，需要将申请单状态更新为"已审批"。

**方法1：在Supabase Dashboard中（推荐）**

1. 打开 https://supabase.com/dashboard
2. 登录并选择项目：**YQFAIBTRIP**
3. 点击左侧菜单 **Table Editor**
4. 选择 **travel_requests** 表
5. 找到刚才创建的申请单（可以通过申请单号搜索）
6. 点击该行进行编辑
7. 将 `status` 字段的值改为 `approved`
8. 点击保存

**方法2：使用SQL Editor**

1. 在Supabase Dashboard中，点击 **SQL Editor**
2. 执行以下SQL（替换为你的申请单号）：

```sql
-- 更新单个申请单
UPDATE travel_requests 
SET status = 'approved' 
WHERE request_no = '你的申请单号';

-- 或者更新所有申请单（测试用）
UPDATE travel_requests 
SET status = 'approved' 
WHERE status = 'pending';
```

---

### 步骤7：测试AI推荐功能（核心功能）⭐

1. **返回应用**，刷新页面（F5）
2. 在申请单列表中，找到刚才的申请单
3. 点击"查看详情"按钮
4. 在申请单详情页，应该能看到两个按钮：
   - "经典预订"
   - **"AI预订"** ⭐
5. **点击"AI预订"按钮**
6. **观看AI推荐生成过程**：
   - 步骤1：正在获取产品数据...
   - 步骤2：正在核查差旅政策...
   - 步骤3：AI正在分析并生成最优方案...
   - 步骤4：完成
7. **查看推荐方案列表**：
   - 应该看到3-5个推荐方案卡片
   - 每个方案显示：
     - 方案序号
     - 关键字标签（如：直飞优先、最低价格等）
     - 推荐原因
     - 价格
     - 评分
     - "符合差旅政策"标签
8. **查看方案详情**：
   - 点击任意方案的"查看详情"按钮
   - 查看完整的方案信息

---

## ✅ 测试检查清单

完成以下检查，确保所有功能正常：

- [ ] ✅ 能够成功登录
- [ ] ✅ 能够看到首页仪表板
- [ ] ✅ 能够提交出差申请
- [ ] ✅ 能够查看申请单列表
- [ ] ✅ 能够查看申请单详情
- [ ] ✅ 能够更新申请单状态为"已审批"
- [ ] ✅ 能够在申请单详情页看到"AI预订"按钮
- [ ] ✅ 能够点击"AI预订"按钮
- [ ] ✅ 能够看到AI推荐生成过程（加载动画）
- [ ] ✅ 能够看到推荐方案列表（3-5个方案卡片）
- [ ] ✅ 能够查看推荐方案详情

---

## 🎉 测试成功！

如果以上所有步骤都能正常完成，说明DEMO运行成功！

---

## 📝 测试反馈

测试完成后，请记录：

### ✅ 正常工作的功能
- [ ] 用户登录
- [ ] 提交申请
- [ ] 申请单列表
- [ ] AI推荐生成
- [ ] 推荐方案展示

### ⚠️ 遇到的问题
- [ ] 问题描述：
- [ ] 错误信息：
- [ ] 截图：

### 💡 改进建议
- [ ] 建议1：
- [ ] 建议2：

---

## 🐛 常见问题解决

### Q1: npm install 失败
**解决方案**：
```bash
# 清除缓存
npm cache clean --force

# 使用国内镜像
npm install --registry=https://registry.npmmirror.com
```

### Q2: 启动失败，提示端口被占用
**解决方案**：
```bash
# Windows: 查找占用3000端口的进程
netstat -ano | findstr :3000

# 或者修改端口（在package.json中）
"start": "set PORT=3001 && react-scripts start"
```

### Q3: 登录后无法获取用户信息
**解决方案**：
- 检查 `src/lib/supabase.ts` 中的配置是否正确
- 确认用户已在users表中有记录
- 检查浏览器控制台是否有错误

### Q4: AI推荐生成失败
**解决方案**：
- 确认申请单状态为 `approved`
- 检查浏览器控制台错误信息
- 检查Supabase数据库连接

---

## 📞 需要帮助？

如果遇到问题：
1. 查看浏览器控制台（F12）的错误信息
2. 检查网络连接
3. 检查Supabase配置
4. 查看 `快速测试指南.md` 获取更多帮助

---

**祝测试顺利！** 🚀

**创建日期**：2024-12-19






