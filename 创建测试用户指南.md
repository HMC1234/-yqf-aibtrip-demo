# åˆ›å»ºæµ‹è¯•ç”¨æˆ·æŒ‡å—

## ğŸ“‹ å‰ç½®æ¡ä»¶

- âœ… æ•°æ®åº“è¿ç§»å·²å®Œæˆ
- âœ… æµ‹è¯•å…¬å¸ã€éƒ¨é—¨ã€æˆæœ¬ä¸­å¿ƒæ•°æ®å·²åˆ›å»º
- âœ… Supabaseé¡¹ç›®å·²é…ç½®

---

## ğŸš€ åˆ›å»ºæ­¥éª¤

### æ­¥éª¤1ï¼šåœ¨Supabase Authenticationä¸­åˆ›å»ºç”¨æˆ·

1. **æ‰“å¼€Supabase Dashboard**
   - è®¿é—®ï¼šhttps://supabase.com/dashboard
   - ç™»å½•å¹¶é€‰æ‹©é¡¹ç›®ï¼šYQFAIBTRIP

2. **è¿›å…¥Authenticationé¡µé¢**
   - å·¦ä¾§èœå• â†’ **Authentication**
   - ç‚¹å‡» **Users** æ ‡ç­¾

3. **åˆ›å»ºæ–°ç”¨æˆ·**
   - ç‚¹å‡»å³ä¸Šè§’ **Add user** æŒ‰é’®
   - é€‰æ‹© **Create new user**

4. **å¡«å†™ç”¨æˆ·ä¿¡æ¯**
   - **Email**: `test@example.com`
   - **Password**: `123456`
   - **Auto Confirm User**: âœ… **å‹¾é€‰æ­¤é€‰é¡¹**ï¼ˆé‡è¦ï¼ï¼‰
   - å…¶ä»–å­—æ®µä¿æŒé»˜è®¤

5. **åˆ›å»ºç”¨æˆ·**
   - ç‚¹å‡» **Create user** æŒ‰é’®

6. **å¤åˆ¶ç”¨æˆ·ID** âš ï¸ **é‡è¦**
   - ç”¨æˆ·åˆ›å»ºæˆåŠŸåï¼Œåœ¨ç”¨æˆ·åˆ—è¡¨ä¸­ç‚¹å‡»åˆšåˆ›å»ºçš„ç”¨æˆ·
   - å¤åˆ¶ **User UID**ï¼ˆUUIDæ ¼å¼ï¼Œä¾‹å¦‚ï¼š`a1b2c3d4-e5f6-7890-abcd-ef1234567890`ï¼‰
   - è¿™ä¸ªIDéœ€è¦ç”¨äºä¸‹ä¸€æ­¥

---

### æ­¥éª¤2ï¼šåœ¨usersè¡¨ä¸­æ’å…¥ç”¨æˆ·ä¿¡æ¯

1. **æ‰“å¼€SQL Editor**
   - å·¦ä¾§èœå• â†’ **SQL Editor**
   - ç‚¹å‡» **New query**

2. **æ‰“å¼€åˆ›å»ºç”¨æˆ·è„šæœ¬**
   - æ‰“å¼€é¡¹ç›®ä¸­çš„ `åˆ›å»ºæµ‹è¯•ç”¨æˆ·.sql` æ–‡ä»¶

3. **æ›¿æ¢ç”¨æˆ·ID**
   - æ‰¾åˆ°è„šæœ¬ä¸­çš„ `[USER_ID_FROM_AUTH]`
   - æ›¿æ¢ä¸ºæ­¥éª¤1ä¸­å¤åˆ¶çš„å®é™…ç”¨æˆ·ID
   - ä¾‹å¦‚ï¼š
     ```sql
     '[USER_ID_FROM_AUTH]'  -- æ›¿æ¢å‰
     'a1b2c3d4-e5f6-7890-abcd-ef1234567890'  -- æ›¿æ¢åï¼ˆä½¿ç”¨å®é™…IDï¼‰
     ```

4. **æ‰§è¡Œè„šæœ¬**
   - ç‚¹å‡» **Run** æŒ‰é’®æ‰§è¡Œ
   - åº”è¯¥æ˜¾ç¤º "Success" æˆ–è¿”å›1è¡Œæ•°æ®

---

### æ­¥éª¤3ï¼šéªŒè¯ç”¨æˆ·åˆ›å»ºæˆåŠŸ

æ‰§è¡Œè„šæœ¬ä¸­çš„éªŒè¯æŸ¥è¯¢ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š

- âœ… ç”¨æˆ·ID
- âœ… Email: test@example.com
- âœ… Username: test
- âœ… Full Name: æµ‹è¯•ç”¨æˆ·
- âœ… Role: employee
- âœ… Company Name: æµ‹è¯•å…¬å¸
- âœ… Department Name: æŠ€æœ¯éƒ¨
- âœ… Cost Center Name: æŠ€æœ¯æˆæœ¬ä¸­å¿ƒ
- âœ… Is Active: true

---

## ğŸ” éªŒè¯æ–¹æ³•

### æ–¹æ³•1ï¼šé€šè¿‡SQLæŸ¥è¯¢éªŒè¯

```sql
-- æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯
SELECT 
    u.id,
    u.email,
    u.username,
    u.full_name,
    c.name AS company_name,
    d.name AS department_name,
    u.role,
    u.is_active
FROM users u
LEFT JOIN companies c ON u.company_id = c.id
LEFT JOIN departments d ON u.department_id = d.id
WHERE u.email = 'test@example.com';
```

### æ–¹æ³•2ï¼šé€šè¿‡è§†å›¾éªŒè¯

```sql
-- ä½¿ç”¨ç”¨æˆ·å®Œæ•´ä¿¡æ¯è§†å›¾
SELECT * FROM v_user_full_info 
WHERE email = 'test@example.com';
```

### æ–¹æ³•3ï¼šé€šè¿‡Table EditoréªŒè¯

1. å·¦ä¾§èœå• â†’ **Table Editor**
2. é€‰æ‹© **users** è¡¨
3. æŸ¥æ‰¾ email = `test@example.com` çš„è®°å½•
4. ç¡®è®¤æ‰€æœ‰å­—æ®µéƒ½å·²æ­£ç¡®å¡«å……

---

## ğŸ§ª æµ‹è¯•ç™»å½•

### ä½¿ç”¨Supabase Authæµ‹è¯•

1. **æ‰“å¼€Authenticationé¡µé¢**
2. **æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨**
   - åº”è¯¥èƒ½çœ‹åˆ° `test@example.com` ç”¨æˆ·
   - çŠ¶æ€åº”è¯¥æ˜¯ **Confirmed**

### ä½¿ç”¨å‰ç«¯æµ‹è¯•ï¼ˆå¦‚æœå·²åˆ›å»ºå‰ç«¯é¡¹ç›®ï¼‰

```javascript
// æµ‹è¯•ç™»å½•
const { data, error } = await supabase.auth.signInWithPassword({
  email: 'test@example.com',
  password: '123456'
})

if (error) {
  console.error('ç™»å½•å¤±è´¥:', error)
} else {
  console.log('ç™»å½•æˆåŠŸ:', data.user)
}
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ç”¨æˆ·åˆ›å»ºåæ— æ³•ç™»å½•
**A**: æ£€æŸ¥æ˜¯å¦å‹¾é€‰äº† "Auto Confirm User" é€‰é¡¹ã€‚å¦‚æœæ²¡æœ‰ï¼Œéœ€è¦æ‰‹åŠ¨ç¡®è®¤ç”¨æˆ·ã€‚

### Q2: æ‰§è¡ŒINSERTæ—¶æç¤ºå¤–é”®çº¦æŸé”™è¯¯
**A**: æ£€æŸ¥ï¼š
- å…¬å¸IDæ˜¯å¦æ­£ç¡®ï¼š`00000000-0000-0000-0000-000000000001`
- éƒ¨é—¨IDæ˜¯å¦æ­£ç¡®ï¼š`00000000-0000-0000-0000-000000000002`
- æˆæœ¬ä¸­å¿ƒIDæ˜¯å¦æ­£ç¡®ï¼š`00000000-0000-0000-0000-000000000003`
- è¿™äº›IDæ˜¯å¦åœ¨å¯¹åº”çš„è¡¨ä¸­å­˜åœ¨

### Q3: æç¤ºç”¨æˆ·IDå·²å­˜åœ¨
**A**: ä½¿ç”¨ `ON CONFLICT` è¯­å¥ä¼šè‡ªåŠ¨æ›´æ–°ç°æœ‰è®°å½•ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚

### Q4: å¦‚ä½•åˆ›å»ºå¤šä¸ªæµ‹è¯•ç”¨æˆ·ï¼Ÿ
**A**: é‡å¤æ­¥éª¤1å’Œæ­¥éª¤2ï¼Œä½¿ç”¨ä¸åŒçš„Emailå’Œç”¨æˆ·IDã€‚

---

## ğŸ“ æµ‹è¯•ç”¨æˆ·ä¿¡æ¯æ±‡æ€»

| å­—æ®µ | å€¼ |
|------|-----|
| Email | test@example.com |
| Password | 123456 |
| Username | test |
| Full Name | æµ‹è¯•ç”¨æˆ· |
| Company | æµ‹è¯•å…¬å¸ |
| Department | æŠ€æœ¯éƒ¨ |
| Cost Center | æŠ€æœ¯æˆæœ¬ä¸­å¿ƒ |
| Role | employee |

---

## âœ… å®Œæˆç¡®è®¤

åˆ›å»ºæˆåŠŸåï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿï¼š
- âœ… åœ¨usersè¡¨ä¸­çœ‹åˆ°æµ‹è¯•ç”¨æˆ·è®°å½•
- âœ… é€šè¿‡SQLæŸ¥è¯¢éªŒè¯ç”¨æˆ·ä¿¡æ¯å®Œæ•´
- âœ… ä½¿ç”¨test@example.com / 123456ç™»å½•ç³»ç»Ÿ

---

**åˆ›å»ºæ—¥æœŸ**ï¼š2024-12-19  
**çŠ¶æ€**ï¼šå¾…æ‰§è¡Œ

