# 🧪 DEMO测试指南 - 公网版本

**公网地址**：https://yqf-aibtrip-demo.vercel.app  
**测试日期**：2024-12-19

---

## 🔗 访问链接

### 主地址
**公网地址**：https://yqf-aibtrip-demo.vercel.app

### 直接访问页面
- **登录页面**：https://yqf-aibtrip-demo.vercel.app/login
- **首页**：https://yqf-aibtrip-demo.vercel.app/dashboard

---

## 🔑 测试账号

- **Email**: test@example.com
- **Password**: 123456

---

## 📋 完整测试流程

### 测试1：基本访问测试 ✅

1. **访问登录页面**
   - 打开：https://yqf-aibtrip-demo.vercel.app/login
   - 验证页面是否正常加载
   - 验证登录表单是否显示

2. **用户登录**
   - 输入邮箱：test@example.com
   - 输入密码：123456
   - 点击"登录"按钮
   - 验证登录成功后跳转到首页

3. **访问首页**
   - 验证首页仪表板是否正常加载
   - 验证统计数据是否显示
   - 验证最近申请列表是否显示
   - 验证快速操作按钮是否可用

---

### 测试2：出差申请功能测试

1. **提交出差申请**
   - 点击"提交出差申请"或访问：https://yqf-aibtrip-demo.vercel.app/travel-request/new
   - 填写表单：
     - 出发地：北京
     - 目的地：上海
     - 日期范围：选择未来日期
     - 出差原因：测试出差申请功能（至少10个字符）
     - 需要预订的产品：选择"机票"和"酒店"
   - 点击"提交申请"
   - 验证申请单号生成（格式：BTRQ+JD+年月日时分秒+四位顺序号）
   - 验证跳转到申请单列表

2. **申请单列表**
   - 访问：https://yqf-aibtrip-demo.vercel.app/travel-request/list
   - 验证申请单在列表中显示
   - 测试状态筛选功能（全部/待审批/审批中/已审批）
   - 点击"查看详情"按钮

3. **申请单详情**
   - 验证申请单详情信息完整
   - 验证状态显示正确
   - 验证"经典预订"和"AI预订"按钮是否显示（已审批状态）

---

### 测试3：AI推荐功能测试（核心功能）⭐

#### 前置准备（重要）

**测试AI推荐功能前，需要在Supabase中将申请单状态改为`approved`**：

**方法1：在Supabase Dashboard中**
1. 打开 Supabase Dashboard：https://supabase.com/dashboard
2. 选择项目：YQFAIBTRIP
3. 打开 Table Editor
4. 找到 `travel_requests` 表
5. 找到您刚创建的申请单
6. 将 `status` 字段改为 `approved`

**方法2：在SQL Editor中执行**
```sql
-- 将所有申请单更新为已审批（测试用）
UPDATE travel_requests 
SET status = 'approved' 
WHERE status = 'pending';
```

#### 3.1 从申请单生成推荐方案

1. **访问申请单详情**
   - 在申请单列表中，找到状态为`approved`的申请单
   - 点击"查看详情"
   - 验证"AI预订"按钮显示

2. **生成AI推荐方案**
   - 点击"AI预订"按钮
   - 观看4步加载动画：
     - 步骤1：获取产品数据
     - 步骤2：核查差旅政策
     - 步骤3：生成推荐方案
     - 步骤4：完成
   - 验证推荐单号生成（格式：AIRD+ZDT+年月日时分秒+五位顺序号）

3. **查看推荐方案列表**
   - 验证推荐方案列表展示（3-5个方案卡片）
   - 验证方案卡片信息：
     - 方案序号
     - 关键字（直飞优先、最短时间、最低价格等）
     - 推荐原因
     - 价格
     - 评分
     - 符合差旅政策标识
   - 验证"查看详情"按钮
   - 验证"一键预订"按钮

4. **查看推荐方案详情**
   - 点击方案卡片的"查看详情"
   - 验证详情信息完整：
     - 推荐单号
     - 方案序号
     - 产品类型
     - 价格
     - 推荐评分
     - 政策符合度
     - 核心关键字
     - 推荐原因
     - 产品详情（JSON格式）
   - 验证"重新推荐"按钮
   - 验证"一键预订"按钮

#### 3.2 智能对话预订

1. **访问AI推荐页面**
   - 点击左侧菜单"AI推荐"
   - 或访问：https://yqf-aibtrip-demo.vercel.app/ai-booking

2. **选择智能对话预订标签页**
   - 点击"智能对话预订"标签页
   - 验证对话界面显示

3. **对话生成申请单**
   - 输入："我要出差"
   - 按照提示提供信息：
     - 出发地：从北京
     - 目的地：去上海
     - 出发日期：2024-12-25
     - 回程日期：2024-12-30
     - 出差原因：参加技术会议，需要预订机票和酒店
   - 输入："生成申请单"
   - 验证申请单号生成（格式：BTRQ+AI+年月日时分秒+四位顺序号）

4. **对话生成推荐方案**
   - 输入："生成推荐方案"
   - 验证推荐单号生成（格式：AIRD+AIC+年月日时分秒+五位顺序号）
   - 验证推荐方案列表展示

#### 3.3 重新推荐功能

1. **在推荐方案详情页**
   - 点击"重新推荐"按钮
   - 确认重新生成
   - 验证新推荐方案生成
   - 验证新推荐单号生成（格式：AIRD+GXH+...或AIRD+GXC+...）

---

### 测试4：一键预订功能测试

1. **从推荐方案列表一键预订**
   - 在推荐方案列表中，点击方案卡片的"一键预订"按钮
   - 验证跳转到订单确认页面
   - 验证推荐方案信息自动填充
   - 填写联系信息：
     - 联系人姓名：张三
     - 联系电话：13800138000
     - 备注：测试订单
   - 点击"确认下单"
   - 验证订单号生成（格式：BK+AI+年月日时分秒+五位顺序号）
   - 验证跳转到订单列表

2. **从推荐方案详情一键预订**
   - 在推荐方案详情页，点击"一键预订"按钮
   - 验证订单确认页面信息完整
   - 填写联系信息并提交
   - 验证订单号生成

---

### 测试5：经典预订流程测试

1. **从申请单跳转到经典预订**
   - 在申请单详情页（状态为`approved`），点击"经典预订"按钮
   - 验证跳转到经典预订搜索页面
   - 验证搜索表单自动填充（出发地、目的地、日期）

2. **搜索产品**
   - 选择产品类型（机票/酒店/火车票/用车）
   - 填写或修改搜索条件
   - 点击"搜索"按钮
   - 验证产品列表展示（Mock数据）

3. **选择产品**
   - 在产品列表中选择一个产品
   - 验证跳转到订单确认页面

4. **确认下单**
   - 填写联系信息
   - 点击"确认下单"
   - 验证订单号生成（格式：BK+TR+年月日时分秒+五位顺序号）
   - 验证跳转到订单列表

---

### 测试6：订单管理功能测试

1. **订单列表**
   - 访问：https://yqf-aibtrip-demo.vercel.app/booking/orders
   - 或点击左侧菜单"我的订单"
   - 验证订单列表加载
   - 验证订单信息显示：
     - 订单号
     - 产品类型
     - 行程信息
     - 价格
     - 状态
     - 预订来源（经典预订/AI推荐）
   - 测试状态筛选功能

2. **订单详情**
   - 在订单列表中，点击"查看详情"
   - 验证订单详情信息完整：
     - 订单号
     - 产品信息
     - 行程信息
     - 价格信息
     - 联系信息
     - 状态信息
     - 预订来源

---

## ✅ 测试检查清单

### 基本功能检查
- [ ] ✅ 访问登录页面正常
- [ ] ✅ 用户登录功能正常
- [ ] ✅ 首页仪表板加载正常
- [ ] ✅ 路由跳转正常

### 出差申请功能检查
- [ ] ✅ 提交申请表单验证正常
- [ ] ✅ 申请单号生成正确（BTRQ+JD+...）
- [ ] ✅ 申请单列表加载正常
- [ ] ✅ 状态筛选功能正常
- [ ] ✅ 申请单详情显示完整

### AI推荐功能检查（核心）⭐
- [ ] ✅ 从申请单生成推荐（加载动画正常）
- [ ] ✅ 推荐单号生成正确（AIRD+ZDT+...）
- [ ] ✅ 推荐方案列表展示（3-5个方案）
- [ ] ✅ 方案卡片信息完整（关键字、价格、评分、原因）
- [ ] ✅ 推荐方案详情显示完整
- [ ] ✅ 智能对话预订功能正常
- [ ] ✅ 对话生成申请单（BTRQ+AI+...）
- [ ] ✅ 对话生成推荐方案（AIRD+AIC+...）
- [ ] ✅ 重新推荐功能正常

### 预订功能检查
- [ ] ✅ 一键预订功能正常
- [ ] ✅ 订单号生成正确（BK+AI+...）
- [ ] ✅ 经典预订流程正常
- [ ] ✅ 订单号生成正确（BK+TR+...）

### 订单管理检查
- [ ] ✅ 订单列表加载正常
- [ ] ✅ 状态筛选功能正常
- [ ] ✅ 预订来源标识正确（经典/AI推荐）
- [ ] ✅ 订单详情显示完整

---

## 🐛 如果遇到问题

### 问题1：页面加载缓慢

**原因**：
- 首次访问需要加载资源
- CDN缓存未生效

**解决方案**：
- 等待几秒钟让资源加载完成
- 刷新页面
- 后续访问会更快（CDN缓存）

### 问题2：Supabase连接失败

**症状**：
- 登录失败
- 数据加载失败

**解决方案**：
- 检查Supabase项目状态
- 验证Supabase配置是否正确
- 检查网络连接

### 问题3：AI推荐功能无法使用

**原因**：
- 申请单状态不是`approved`

**解决方案**：
- 在Supabase中将申请单状态改为`approved`
- 参考"前置准备"部分

### 问题4：页面404错误

**原因**：
- 路由配置问题
- 刷新页面导致的路由问题

**解决方案**：
- ✅ 已配置 `vercel.json`，应该自动处理路由
- 如果还有问题，检查路由配置

---

## 📝 测试反馈

**请记录测试结果**：

### ✅ 正常工作的功能
- [ ] 列出正常工作的功能

### ❌ 发现的问题
- [ ] 问题描述：
- [ ] 错误信息：
- [ ] 截图：

### 💡 改进建议
- [ ] 建议1：
- [ ] 建议2：

---

## 🎉 测试完成

**测试完成后，请提供反馈**：

1. ✅ 哪些功能正常工作
2. ❌ 发现了什么问题
3. 💡 有什么改进建议

---

## 📊 测试进度

- ⏳ **基本功能测试**：待测试
- ⏳ **出差申请功能测试**：待测试
- ⏳ **AI推荐功能测试**：待测试
- ⏳ **预订功能测试**：待测试
- ⏳ **订单管理测试**：待测试

---

**公网地址**：https://yqf-aibtrip-demo.vercel.app  
**测试账号**：test@example.com / 123456  
**状态**：✅ **可以开始测试！**

🎯 **开始测试吧！** 🚀

