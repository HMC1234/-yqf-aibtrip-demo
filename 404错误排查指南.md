# 404错误排查指南

## 问题分析

遇到 `HTTP错误: 404 Not Found` 可能的原因：

1. **直接调用API时路径不正确**
2. **使用代理但代理未正确配置**
3. **API服务器返回404**

## 诊断步骤

### 1. 查看浏览器控制台

打开浏览器开发者工具（F12），查看控制台输出，应该看到：

```
🔍 [API调用] 配置信息: {
  基础地址: "https://bizapi.yiqifei.cn/servings" 或 "/api/yqf",
  ...
}
🔍 [API调用] 完整请求URL: ...
```

**请告诉我**：
- `基础地址` 是什么？
- `完整请求URL` 是什么？

### 2. 查看Network标签

在浏览器开发者工具的Network标签中：

1. 刷新页面
2. 测试API调用
3. 查找失败的请求
4. 查看：
   - **请求URL**：是什么？
   - **请求方法**：应该是 POST
   - **状态码**：404
   - **响应内容**：是什么？

### 3. 检查配置

在测试页面的"配置"标签页，检查：
- **API Base URL**：是什么？
  - 如果是 `https://bizapi.yiqifei.cn/servings`：直接调用
  - 如果是 `/api/yqf`：使用代理

## 解决方案

### 方案1：使用代理（推荐用于开发环境）

如果直接调用遇到404或CORS错误：

1. 在测试页面的"配置"标签页
2. 将 `API Base URL` 改为：`/api/yqf`
3. 保存配置
4. 重新测试

**前提条件**：
- 开发服务器正在运行
- `src/setupProxy.js` 文件存在
- `http-proxy-middleware` 已安装

### 方案2：检查直接调用的URL

如果使用直接调用（`https://bizapi.yiqifei.cn/servings`）：

1. 检查浏览器控制台的日志
2. 确认请求URL格式是否正确：
   ```
   https://bizapi.yiqifei.cn/servings?version=2.0&app_key=xxx&method=ShoppingServer.EasyShopping_V2
   ```
3. 如果URL不正确，检查配置

## 快速修复

### 步骤1：检查代理是否可用

在浏览器中直接访问：
```
http://localhost:3000/api/yqf?version=2.0&app_key=test&method=test
```

**如果返回404**：
- 说明代理没有工作
- 需要检查 `src/setupProxy.js` 是否加载
- 需要重启开发服务器

**如果返回其他错误**：
- 说明代理工作正常
- 可能是API参数问题

### 步骤2：使用代理测试

1. 在测试页面配置中，将 `API Base URL` 改为 `/api/yqf`
2. 保存配置
3. 重新测试

### 步骤3：查看终端日志

如果使用代理，在运行 `npm start` 的终端中应该看到：

```
🔵 [代理] 请求: POST /api/yqf?...
🟢 [代理] 响应: 200 ...
```

如果没有看到这些日志，说明代理没有工作。

## 请提供以下信息

为了进一步诊断，请提供：

1. **浏览器控制台输出**：
   - `🔍 [API调用] 配置信息` 的内容
   - `🔍 [API调用] 完整请求URL` 的内容

2. **Network标签信息**：
   - 请求URL
   - 请求方法
   - 状态码
   - 响应内容

3. **配置信息**：
   - API Base URL 是什么？
   - 是否使用代理？

4. **终端日志**（如果使用代理）：
   - 是否看到代理日志？

