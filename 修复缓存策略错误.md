# ğŸ”§ ä¿®å¤ç¼“å­˜ç­–ç•¥è®¾ç½®é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š`coscmd: error: invalid choice: 'put'`

**é—®é¢˜**ï¼š`coscmd` å‘½ä»¤æ²¡æœ‰ `put` å­å‘½ä»¤

**å¥½æ¶ˆæ¯**ï¼šæ–‡ä»¶ä¸Šä¼ å·²ç»æˆåŠŸï¼ˆ7 files uploadedï¼‰ï¼

---

## âœ… é—®é¢˜åˆ†æ

**é”™è¯¯åŸå› **ï¼š
- æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼ˆâœ… 7ä¸ªæ–‡ä»¶å·²ä¸Šä¼ ï¼‰
- ä½†è®¾ç½® `index.html` ç¼“å­˜ç­–ç•¥æ—¶å¤±è´¥
- `coscmd` æ²¡æœ‰ `put` å‘½ä»¤

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä¿®æ”¹å·¥ä½œæµæ–‡ä»¶ï¼Œä½¿ç”¨ `coscmd upload` å‘½ä»¤çš„ `-H` å‚æ•°ç›´æ¥è®¾ç½®header
- å…ˆå•ç‹¬ä¸Šä¼  `index.html` å¹¶è®¾ç½®ç¼“å­˜ç­–ç•¥
- ç„¶åä¸Šä¼ å…¶ä»–æ–‡ä»¶

---

## ğŸš€ ä¿®å¤æ­¥éª¤

### æ­¥éª¤1ï¼šæ›´æ–°å·¥ä½œæµæ–‡ä»¶ï¼ˆ2åˆ†é’Ÿï¼‰

1. **è®¿é—®å·¥ä½œæµæ–‡ä»¶**
   ```
   https://github.com/HMC1234/-yqf-aibtrip-demo/blob/main/.github/workflows/deploy-tencent.yml
   ```

2. **ç‚¹å‡»ç¼–è¾‘**
   - ç‚¹å‡»å³ä¸Šè§’çš„"Edit"ï¼ˆé“…ç¬”å›¾æ ‡ï¼‰

3. **æ‰¾åˆ° "Deploy to Tencent COS" æ­¥éª¤**

   æ‰¾åˆ°è¿™éƒ¨åˆ†ä»£ç ï¼š
   ```yaml
   # ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶
   echo "ä¸Šä¼ buildç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶..."
   coscmd upload -rs build/ /
   ...
   # è®¾ç½®index.htmlç¼“å­˜ç­–ç•¥
   echo "è®¾ç½®index.htmlç¼“å­˜ç­–ç•¥..."
   coscmd put build/index.html /index.html -H '...'
   ```

4. **æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹**ï¼š
   ```yaml
   # å…ˆä¸Šä¼ index.htmlï¼Œè®¾ç½®ä¸ç¼“å­˜ï¼ˆSPAéœ€è¦ï¼‰
   echo "ä¸Šä¼ index.htmlï¼ˆè®¾ç½®ä¸ç¼“å­˜ç­–ç•¥ï¼‰..."
   coscmd upload build/index.html /index.html -H 'Cache-Control:no-cache, no-store, must-revalidate' -H 'Content-Type:text/html; charset=utf-8'
   
   if [ $? -ne 0 ]; then
     echo "âŒ index.htmlä¸Šä¼ å¤±è´¥"
     exit 1
   fi
   
   echo "âœ… index.htmlä¸Šä¼ æˆåŠŸ"
   
   # ä¸Šä¼ å…¶ä»–æ–‡ä»¶ï¼ˆstaticç›®å½•ç­‰ï¼‰
   echo "ä¸Šä¼ å…¶ä»–æ–‡ä»¶..."
   coscmd upload -rs build/static /static
   
   if [ $? -ne 0 ]; then
     echo "âŒ staticç›®å½•ä¸Šä¼ å¤±è´¥"
     exit 1
   fi
   
   # ä¸Šä¼ asset-manifest.jsonï¼ˆå¦‚æœæœ‰ï¼‰
   if [ -f "build/asset-manifest.json" ]; then
     echo "ä¸Šä¼ asset-manifest.json..."
     coscmd upload build/asset-manifest.json /asset-manifest.json
   fi
   
   echo "âœ… æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ æˆåŠŸ"
   echo "âœ… éƒ¨ç½²å®Œæˆï¼"
   ```

5. **æäº¤æ›´æ”¹**
   - å¡«å†™æäº¤ä¿¡æ¯ï¼š`fix: ä¿®å¤coscmd putå‘½ä»¤é”™è¯¯ï¼Œä½¿ç”¨uploadå‘½ä»¤è®¾ç½®header`
   - ç‚¹å‡»"Commit changes"

---

### æ­¥éª¤2ï¼šå†æ¬¡è¿è¡Œå·¥ä½œæµï¼ˆ1åˆ†é’Ÿï¼‰

1. **è®¿é—®GitHub Actions**
   ```
   https://github.com/HMC1234/-yqf-aibtrip-demo/actions
   ```

2. **è¿è¡Œå·¥ä½œæµ**
   - ç‚¹å‡»"Deploy to Tencent Cloud COS"
   - ç‚¹å‡»"Run workflow"
   - é€‰æ‹©åˆ†æ”¯ï¼š`main`
   - ç‚¹å‡»"Run workflow"

3. **æŸ¥çœ‹ç»“æœ**
   - ç­‰å¾…çº¦3-5åˆ†é’Ÿ
   - ç¡®è®¤æ‰€æœ‰æ­¥éª¤æˆåŠŸï¼ˆç»¿è‰²âœ“ï¼‰
   - ç¡®è®¤æ²¡æœ‰é”™è¯¯

---

## âœ… ä¿®å¤åéªŒè¯

### 1. æ£€æŸ¥GitHub Actionsæ—¥å¿—

**è®¿é—®**ï¼šhttps://github.com/HMC1234/-yqf-aibtrip-demo/actions

**æ£€æŸ¥é¡¹**ï¼š
- âœ… å·¥ä½œæµè¿è¡ŒçŠ¶æ€ä¸ºç»¿è‰²ï¼ˆæˆåŠŸï¼‰
- âœ… æ‰€æœ‰æ­¥éª¤éƒ½æ˜¾ç¤ºç»¿è‰²âœ“
- âœ… æ²¡æœ‰é”™è¯¯ä¿¡æ¯
- âœ… æ—¥å¿—æ˜¾ç¤ºï¼š`âœ… æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ æˆåŠŸ`
- âœ… æ—¥å¿—æ˜¾ç¤ºï¼š`âœ… éƒ¨ç½²å®Œæˆï¼`

---

### 2. æ£€æŸ¥COSæ–‡ä»¶

**è®¿é—®**ï¼šhttps://console.cloud.tencent.com/cos

**æ£€æŸ¥é¡¹**ï¼š
- âœ… è¿›å…¥å­˜å‚¨æ¡¶ `yqf-aibtrip-demo-1387623418`
- âœ… ç¡®è®¤ `index.html` å­˜åœ¨
- âœ… ç¡®è®¤ `static` ç›®å½•å­˜åœ¨
- âœ… ç¡®è®¤ `asset-manifest.json` å­˜åœ¨ï¼ˆå¦‚æœæœ‰ï¼‰

---

### 3. è®¿é—®éƒ¨ç½²çš„ç½‘ç«™

**è®¿é—®åœ°å€**ï¼š
```
https://yqf-aibtrip-demo-1387623418.cos-website.ap-guangzhou.myqcloud.com
```

**éªŒè¯é¡¹**ï¼š
- âœ… ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- âœ… é™æ€èµ„æºåŠ è½½æ­£å¸¸ï¼ˆCSSã€JSï¼‰
- âœ… é¡µé¢åŠŸèƒ½æ­£å¸¸
- âœ… SPAè·¯ç”±æ­£å¸¸å·¥ä½œï¼ˆæ— 404é”™è¯¯ï¼‰
- âœ… ç™»å½•åŠŸèƒ½æ­£å¸¸

---

## ğŸ“‹ å®Œæ•´çš„å·¥ä½œæµæ–‡ä»¶å†…å®¹

æˆ‘å·²ç»ä¸ºæ‚¨ä¿®æ”¹äº†å·¥ä½œæµæ–‡ä»¶ï¼Œå®Œæ•´çš„"Deploy to Tencent COS"æ­¥éª¤å¦‚ä¸‹ï¼š

```yaml
- name: Deploy to Tencent COS
  env:
    BUCKET: ${{ secrets.TENCENT_BUCKET || env.BUCKET }}
    REGION: ${{ secrets.TENCENT_REGION || env.REGION }}
  run: |
    echo "å¼€å§‹ä¸Šä¼ æ–‡ä»¶åˆ°COS..."
    echo "å­˜å‚¨æ¡¶: $BUCKET"
    echo "åœ°åŸŸ: $REGION"
    
    # æ£€æŸ¥buildç›®å½•æ˜¯å¦å­˜åœ¨
    if [ ! -d "build" ]; then
      echo "âŒ é”™è¯¯: buildç›®å½•ä¸å­˜åœ¨"
      exit 1
    fi
    
    # æ£€æŸ¥index.htmlæ˜¯å¦å­˜åœ¨
    if [ ! -f "build/index.html" ]; then
      echo "âŒ é”™è¯¯: build/index.htmlä¸å­˜åœ¨"
      exit 1
    fi
    
    # å…ˆä¸Šä¼ index.htmlï¼Œè®¾ç½®ä¸ç¼“å­˜ï¼ˆSPAéœ€è¦ï¼‰
    echo "ä¸Šä¼ index.htmlï¼ˆè®¾ç½®ä¸ç¼“å­˜ç­–ç•¥ï¼‰..."
    coscmd upload build/index.html /index.html -H 'Cache-Control:no-cache, no-store, must-revalidate' -H 'Content-Type:text/html; charset=utf-8'
    
    if [ $? -ne 0 ]; then
      echo "âŒ index.htmlä¸Šä¼ å¤±è´¥"
      exit 1
    fi
    
    echo "âœ… index.htmlä¸Šä¼ æˆåŠŸ"
    
    # ä¸Šä¼ å…¶ä»–æ–‡ä»¶ï¼ˆstaticç›®å½•ç­‰ï¼‰
    echo "ä¸Šä¼ å…¶ä»–æ–‡ä»¶..."
    coscmd upload -rs build/static /static
    
    if [ $? -ne 0 ]; then
      echo "âŒ staticç›®å½•ä¸Šä¼ å¤±è´¥"
      exit 1
    fi
    
    # ä¸Šä¼ asset-manifest.jsonï¼ˆå¦‚æœæœ‰ï¼‰
    if [ -f "build/asset-manifest.json" ]; then
      echo "ä¸Šä¼ asset-manifest.json..."
      coscmd upload build/asset-manifest.json /asset-manifest.json
    fi
    
    echo "âœ… æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ æˆåŠŸ"
    echo "âœ… éƒ¨ç½²å®Œæˆï¼"
```

---

## âœ… å®Œæˆ

ä¿®å¤åï¼Œå·¥ä½œæµä¼šï¼š
1. âœ… ä¸Šä¼  `index.html` å¹¶è®¾ç½®ä¸ç¼“å­˜ç­–ç•¥ï¼ˆSPAéœ€è¦ï¼‰
2. âœ… ä¸Šä¼  `static` ç›®å½•ï¼ˆCSSå’ŒJSæ–‡ä»¶ï¼‰
3. âœ… ä¸Šä¼  `asset-manifest.json`ï¼ˆå¦‚æœæœ‰ï¼‰
4. âœ… æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ æˆåŠŸ

**è¯·æŒ‰ç…§æ­¥éª¤1æ›´æ–°å·¥ä½œæµæ–‡ä»¶ï¼Œç„¶åå†æ¬¡è¿è¡Œå·¥ä½œæµï¼** ğŸš€


