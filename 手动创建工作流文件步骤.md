# ğŸ“ æ‰‹åŠ¨åˆ›å»ºGitHub Actionså·¥ä½œæµæ–‡ä»¶æ­¥éª¤

**é—®é¢˜**ï¼šåœ¨GitHub Actionsé¡µé¢çœ‹ä¸åˆ°"Deploy to Tencent Cloud COS"å·¥ä½œæµ

**åŸå› **ï¼šGitHubæ¨é€ä¿æŠ¤é˜»æ­¢äº†æ¨é€ï¼ˆå³ä½¿æ–°åˆ†æ”¯ä¹Ÿä¸è¡Œï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨GitHubç½‘é¡µä¸Šæ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶ï¼ˆæœ€ç®€å•ï¼‰â­

---

## ğŸš€ æ­¥éª¤ï¼šåœ¨GitHubç½‘é¡µä¸Šåˆ›å»ºæ–‡ä»¶

### æ­¥éª¤1ï¼šè®¿é—®GitHubä»“åº“

**è®¿é—®**ï¼š
```
https://github.com/HMC1234/-yqf-aibtrip-demo
```

---

### æ­¥éª¤2ï¼šåˆ›å»º`.github/workflows`ç›®å½•å’Œæ–‡ä»¶

1. **ç‚¹å‡»"Add file"æŒ‰é’®**
   - åœ¨ä»“åº“é¡µé¢ï¼Œç‚¹å‡»å³ä¸Šè§’çš„"Add file"æŒ‰é’®
   - é€‰æ‹©"Create new file"

2. **è¾“å…¥æ–‡ä»¶è·¯å¾„**
   - åœ¨æ–‡ä»¶åè¾“å…¥æ¡†ä¸­è¾“å…¥ï¼š
   ```
   .github/workflows/deploy-tencent.yml
   ```
   - GitHubä¼šè‡ªåŠ¨åˆ›å»º`.github`å’Œ`workflows`ç›®å½•

---

### æ­¥éª¤3ï¼šç²˜è´´å·¥ä½œæµæ–‡ä»¶å†…å®¹

**å¤åˆ¶ä»¥ä¸‹å†…å®¹å¹¶ç²˜è´´åˆ°æ–‡ä»¶ç¼–è¾‘å™¨ä¸­**ï¼š

```yaml
name: Deploy to Tencent Cloud COS

on:
  push:
    branches:
      - main
  workflow_dispatch:

env:
  REGION: ap-guangzhou
  BUCKET: yqf-aibtrip-demo

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Build project
        run: npm run build
        env:
          CI: false

      - name: Setup Python for coscmd
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install coscmd
        run: |
          pip install coscmd

      - name: Configure coscmd
        env:
          SECRET_ID: ${{ secrets.TENCENT_SECRET_ID }}
          SECRET_KEY: ${{ secrets.TENCENT_SECRET_KEY }}
          BUCKET: ${{ secrets.TENCENT_BUCKET || env.BUCKET }}
          REGION: ${{ secrets.TENCENT_REGION || env.REGION }}
        run: |
          coscmd config -a "$SECRET_ID" -s "$SECRET_KEY" -b "$BUCKET" -r "$REGION"

      - name: Deploy to Tencent COS
        env:
          BUCKET: ${{ secrets.TENCENT_BUCKET || env.BUCKET }}
          REGION: ${{ secrets.TENCENT_REGION || env.REGION }}
        run: |
          echo "å¼€å§‹ä¸Šä¼ æ–‡ä»¶åˆ°COS..."
          coscmd upload -rs build/ /
          
          echo "è®¾ç½®index.htmlç¼“å­˜ç­–ç•¥..."
          coscmd put build/index.html /index.html -H '{"Cache-Control":"no-cache, no-store, must-revalidate", "Content-Type":"text/html; charset=utf-8"}'
          
          echo "âœ… æ–‡ä»¶ä¸Šä¼ å®Œæˆ"
          
      - name: Deployment Summary
        env:
          BUCKET: ${{ secrets.TENCENT_BUCKET || env.BUCKET }}
          REGION: ${{ secrets.TENCENT_REGION || env.REGION }}
          CDN_DOMAIN: ${{ secrets.TENCENT_CDN_DOMAIN }}
        run: |
          echo "âœ… éƒ¨ç½²å®Œæˆï¼"
          echo "ğŸ“¦ å­˜å‚¨æ¡¶: $BUCKET"
          echo "ğŸ“ åœ°åŸŸ: $REGION"
          if [ -n "$CDN_DOMAIN" ]; then
            echo "ğŸŒ CDNåœ°å€: https://$CDN_DOMAIN"
          else
            echo "ğŸŒ COSåœ°å€: https://$BUCKET.cos-website.$REGION.myqcloud.com"
          fi
```

---

### æ­¥éª¤4ï¼šæäº¤æ–‡ä»¶

1. **å¡«å†™æäº¤ä¿¡æ¯**
   - åœ¨é¡µé¢ä¸‹æ–¹çš„"Commit new file"åŒºåŸŸ
   - æäº¤ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ï¼š`feat: æ·»åŠ è…¾è®¯äº‘COSè‡ªåŠ¨éƒ¨ç½²å·¥ä½œæµ`
   - é€‰æ‹©"Commit directly to the main branch"

2. **ç‚¹å‡»"Commit new file"æŒ‰é’®**
   - ç‚¹å‡»ç»¿è‰²çš„"Commit new file"æŒ‰é’®

---

### æ­¥éª¤5ï¼šéªŒè¯å·¥ä½œæµæ˜¯å¦åˆ›å»ºæˆåŠŸ

1. **è®¿é—®GitHub Actionsé¡µé¢**
   ```
   https://github.com/HMC1234/-yqf-aibtrip-demo/actions
   ```

2. **æ£€æŸ¥å·¥ä½œæµ**
   - å·¦ä¾§åº”è¯¥èƒ½çœ‹åˆ°"Deploy to Tencent Cloud COS"å·¥ä½œæµ
   - å¦‚æœçœ‹ä¸åˆ°ï¼Œåˆ·æ–°é¡µé¢ï¼ˆå¯èƒ½éœ€è¦å‡ ç§’é’Ÿï¼‰

3. **éªŒè¯å·¥ä½œæµé…ç½®**
   - ç‚¹å‡»"Deploy to Tencent Cloud COS"å·¥ä½œæµ
   - åº”è¯¥èƒ½çœ‹åˆ°å·¥ä½œæµçš„è¯¦ç»†ä¿¡æ¯
   - åº”è¯¥èƒ½çœ‹åˆ°"Run workflow"æŒ‰é’®

---

## âœ… æ–‡ä»¶åˆ›å»ºæˆåŠŸå

æ–‡ä»¶åˆ›å»ºæˆåŠŸåï¼Œæ‚¨å°±å¯ä»¥ï¼š

1. **çœ‹åˆ°å·¥ä½œæµ**
   - è®¿é—®ï¼šhttps://github.com/HMC1234/-yqf-aibtrip-demo/actions
   - å·¦ä¾§åº”è¯¥èƒ½çœ‹åˆ°"Deploy to Tencent Cloud COS"å·¥ä½œæµ

2. **æ‰‹åŠ¨è§¦å‘éƒ¨ç½²**
   - ç‚¹å‡»"Deploy to Tencent Cloud COS"å·¥ä½œæµ
   - ç‚¹å‡»å³ä¸Šè§’çš„"Run workflow"æŒ‰é’®
   - é€‰æ‹©åˆ†æ”¯ï¼š`main`
   - ç‚¹å‡»"Run workflow"

3. **æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**
   - ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦3-5åˆ†é’Ÿï¼‰
   - æŸ¥çœ‹æ¯ä¸ªæ­¥éª¤çš„æ—¥å¿—
   - ç¡®è®¤æ˜¯å¦æˆåŠŸ

---

## ğŸ¯ å®Œæˆåçš„ä¸‹ä¸€æ­¥

æ–‡ä»¶åˆ›å»ºæˆåŠŸåï¼Œå‘Šè¯‰æˆ‘"å·¥ä½œæµå·²åˆ›å»º"ï¼Œæˆ‘ä¼šå¸®æ‚¨ï¼š
1. éªŒè¯å·¥ä½œæµé…ç½®
2. æµ‹è¯•éƒ¨ç½²
3. éªŒè¯éƒ¨ç½²ç»“æœ

---

**è¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œä¸éœ€è¦å¤„ç†Gité—®é¢˜ï¼** ğŸš€

**è¯·åœ¨GitHubç½‘é¡µä¸Šåˆ›å»ºæ–‡ä»¶åå‘Šè¯‰æˆ‘ç»“æœï¼**


