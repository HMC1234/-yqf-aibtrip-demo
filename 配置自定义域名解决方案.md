# 🔧 配置自定义域名解决方案

**问题**：访问 `https://yqf-aibtrip-demo-1387623418.cos-website.ap-guangzhou.myqcloud.com` 时下载文件而不是显示网页

**根本原因**：根据[腾讯云官方文档](https://cloud.tencent.com/document/product/436/32670)，**2024年1月1日后创建的存储桶，不再支持通过COS默认域名（包括静态网站域名）直接访问对象**。

**解决方案**：配置自定义域名访问静态网站

---

## ✅ 解决方案（推荐）

### 方法1：配置自定义域名（推荐）⭐

这是官方推荐的方式，2024年后创建的存储桶必须使用自定义域名访问。

---

## 🚀 配置步骤（约10-15分钟）

### 步骤1：准备自定义域名

**您需要一个自定义域名，例如**：
- `demo.yqf-aibtrip.com`
- `aibtrip-demo.example.com`
- 或者使用腾讯云提供的测试域名

**如果没有域名**：
- 可以购买一个域名（推荐在腾讯云购买，便于配置）
- 或者暂时使用其他测试域名

---

### 步骤2：在COS控制台配置自定义域名

1. **访问COS控制台**
   ```
   https://console.cloud.tencent.com/cos
   ```

2. **进入存储桶配置**
   - 点击存储桶：`yqf-aibtrip-demo-1387623418`
   - 左侧菜单：**域名与传输管理** → **自定义源站域名**

3. **添加自定义域名**
   - 点击 **添加域名** 按钮
   - **自定义域名**：输入您的域名（例如：`demo.yqf-aibtrip.com`）
   - **源站类型**：选择 **静态网站源站** ⭐（重要！）
   - 点击 **保存**

4. **配置域名解析**
   - 系统会显示 **CNAME** 记录（例如：`yqf-aibtrip-demo-1387623418.cos-website.ap-guangzhou.myqcloud.com`）
   - 需要到您的域名DNS服务商配置CNAME解析

5. **配置HTTPS（可选但推荐）**
   - 在自定义域名配置页面
   - 选择 **HTTPS** 证书
   - 可以使用腾讯云提供的免费证书
   - 或上传自己的证书

---

### 步骤3：配置DNS解析

1. **登录域名DNS服务商**
   - 如果您在腾讯云购买域名，访问：https://console.cloud.tencent.com/cns
   - 如果使用其他服务商（如阿里云、Godaddy等），登录对应的DNS管理控制台

2. **添加CNAME记录**
   - **记录类型**：选择 **CNAME**
   - **主机记录**：输入子域名（例如：`demo`，如果您的域名是 `demo.yqf-aibtrip.com`）
   - **记录值**：输入COS提供的CNAME地址（例如：`yqf-aibtrip-demo-1387623418.cos-website.ap-guangzhou.myqcloud.com`）
   - **TTL**：默认（通常600秒）

3. **保存并等待生效**
   - 点击 **保存**
   - 等待DNS解析生效（通常5-30分钟）

---

### 步骤4：验证配置

1. **检查DNS解析**
   - 使用工具检查CNAME是否生效：
     - https://tool.chinaz.com/dns/
     - 输入您的域名，检查CNAME记录

2. **访问网站**
   - 使用您的自定义域名访问：
     ```
     https://demo.yqf-aibtrip.com
     ```
   - 应该显示网页而不是下载文件

---

## 📋 详细配置说明

根据[腾讯云官方文档](https://cloud.tencent.com/document/product/436/32670)，配置要点：

### 1. 静态网站源站类型

**重要**：添加自定义域名时，必须选择 **静态网站源站**，而不是 **默认源站**。

- ✅ **静态网站源站**：可以正确显示网页，支持SPA路由
- ❌ **默认源站**：会下载文件而不是显示网页

### 2. 索引文档和错误文档

即使使用自定义域名，也需要配置：

1. **开启静态网站托管**
   - 左侧菜单：**基础配置** → **静态网站**
   - 开启 **静态网站托管**
   - **索引文档**：`index.html`
   - **错误文档**：`index.html`（SPA必需）

2. **保存配置**

---

## ⚠️ 重要提示

根据官方文档：

> **2024年1月1日后创建的存储桶，不再支持通过COS默认域名（包括静态网站域名）直接访问对象。您可通过自定义域名访问对象。**

这意味着：
- ❌ `https://yqf-aibtrip-demo-1387623418.cos-website.ap-guangzhou.myqcloud.com` 不再可用
- ✅ 必须使用自定义域名访问

---

## 🎯 临时解决方案（如果暂时没有域名）

如果暂时没有域名，可以考虑：

### 方案1：购买域名（推荐）
- 在腾讯云购买一个域名（通常几十元/年）
- 配置自定义域名
- 长期使用

### 方案2：使用测试域名
- 如果有其他域名，可以使用子域名
- 例如：`test.your-existing-domain.com`

---

## ✅ 配置检查清单

**配置自定义域名前**：
- [ ] 已准备自定义域名
- [ ] 域名DNS管理权限

**配置自定义域名后**：
- [ ] COS中已添加自定义域名
- [ ] 源站类型选择了 **静态网站源站** ⭐
- [ ] DNS已配置CNAME记录
- [ ] DNS解析已生效
- [ ] HTTPS证书已配置（可选但推荐）
- [ ] 静态网站托管已开启
- [ ] 索引文档设置为 `index.html`
- [ ] 错误文档设置为 `index.html`

**验证**：
- [ ] 使用自定义域名可以正常访问
- [ ] 网页显示正常（不是下载文件）
- [ ] SPA路由正常工作（无404错误）
- [ ] 静态资源加载正常

---

## 📖 参考文档

- [腾讯云静态网站配置文档](https://cloud.tencent.com/document/product/436/32670)
- [开启自定义源站域名](https://cloud.tencent.com/document/product/436/36637)
- [配置域名解析](https://cloud.tencent.com/document/product/302/3446)

---

## 🚀 完成

**配置自定义域名后，您的网站就可以正常访问了！**

**访问地址**：
```
https://您的自定义域名
```

**例如**：
```
https://demo.yqf-aibtrip.com
```

---

**请按照步骤2-3配置自定义域名！** 🚀

**如果没有域名，请先购买域名或在步骤1准备域名！** 📝


