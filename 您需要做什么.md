# 📋 您需要做什么 - 腾讯云部署配置

**项目名称**：YQFAIBTRIP 一起飞智能商旅系统 - DEMO  
**GitHub仓库**：https://github.com/HMC1234/-yqf-aibtrip-demo

---

## ✅ 已完成的准备工作

我已经为您准备了以下内容：

1. ✅ **GitHub Actions工作流文件**
   - `.github/workflows/deploy-tencent.yml`（COS部署）
   - `.github/workflows/deploy-tencent-cloudbase.yml`（CloudBase部署，可选）

2. ✅ **部署文档**
   - `腾讯云部署指南.md`（详细指南）
   - `腾讯云部署快速步骤.md`（快速步骤）
   - `README_腾讯云部署.md`（简要说明）

3. ✅ **配置文件示例**
   - `tencent-cos-config.json`（配置示例）

4. ✅ **代码已推送到GitHub**
   - 工作流文件已提交并推送

---

## 📋 您需要完成的3个步骤

### ✅ 步骤1：创建腾讯云COS存储桶（5分钟）

#### 1.1 访问COS控制台

1. **打开浏览器**
   - 访问：https://console.cloud.tencent.com/cos
   - 登录您的腾讯云账号

2. **如果没有账号**
   - 注册腾讯云账号：https://cloud.tencent.com/register
   - 完成实名认证（必需）

#### 1.2 创建存储桶

1. **点击"创建存储桶"**

2. **配置存储桶**：
   - **名称**：`yqf-aibtrip-demo`（可以自定义，需全局唯一）
   - **所属地域**：选择离您最近的地域
     - 推荐：`广州（ap-guangzhou）`
     - 其他选项：北京、上海、成都等
   - **访问权限**：**公有读私有写**（重要！）
   - **存储类型**：标准存储
   - 其他选项保持默认

3. **点击"创建"**

#### 1.3 开启静态网站托管

1. **进入存储桶详情**
   - 点击刚创建的存储桶名称

2. **开启静态网站托管**
   - 左侧菜单选择"基础配置" → "静态网站"
   - 点击"编辑"
   - **状态**：开启
   - **索引文档**：`index.html`
   - **错误文档**：`index.html`（SPA需要，重要！）
   - **强制HTTPS**：开启（推荐）

3. **保存配置**

---

### ✅ 步骤2：获取腾讯云API密钥（2分钟）

#### 2.1 访问API密钥管理

1. **访问密钥管理页面**
   - 访问：https://console.cloud.tencent.com/cam/capi
   - 或者：腾讯云控制台 → "访问管理" → "API密钥管理"

2. **创建密钥**（如果还没有）
   - 点击"新建密钥"
   - 创建成功后，会显示SecretId和SecretKey

#### 2.2 复制并保存密钥信息

**⚠️ 重要：请妥善保管这些信息，不要泄露！**

- **SecretId**：从腾讯云控制台获取的API密钥ID（格式类似：AKID开头）
- **SecretKey**：从腾讯云控制台获取的API密钥（格式类似：一串字符）

**⚠️ 重要：这是您的真实密钥，请妥善保管，不要泄露！**

---

### ✅ 步骤3：配置GitHub Secrets（3分钟）

#### 3.1 访问GitHub仓库设置

1. **打开GitHub仓库**
   - 访问：https://github.com/HMC1234/-yqf-aibtrip-demo

2. **进入设置页面**
   - 点击仓库顶部的"Settings"（设置）
   - 左侧菜单选择"Secrets and variables" → "Actions"

3. **如果没有权限**
   - 需要仓库管理员权限
   - 如果没有权限，请联系仓库管理员

#### 3.2 添加Secrets

点击"New repository secret"，逐个添加以下Secrets：

**Secret 1：`TENCENT_SECRET_ID`**
- **Name**: `TENCENT_SECRET_ID`
- **Value**: 您的SecretId（步骤2中获取的）

**Secret 2：`TENCENT_SECRET_KEY`**
- **Name**: `TENCENT_SECRET_KEY`
- **Value**: 您的SecretKey（步骤2中获取的）

**Secret 3：`TENCENT_BUCKET`**（可选）
- **Name**: `TENCENT_BUCKET`
- **Value**: 您的存储桶名称（例如：`yqf-aibtrip-demo`）
- **说明**：如果名称与默认值`yqf-aibtrip-demo`不同，需要配置

**Secret 4：`TENCENT_REGION`**（可选）
- **Name**: `TENCENT_REGION`
- **Value**: 您的存储桶地域（例如：`ap-guangzhou`）
- **说明**：如果地域与默认值`ap-guangzhou`不同，需要配置

**Secret 5：`TENCENT_CDN_DOMAIN`**（可选）
- **Name**: `TENCENT_CDN_DOMAIN`
- **Value**: 您的CDN域名（如果配置了CDN）
- **说明**：如果暂时没有配置CDN，可以跳过

---

## 🚀 完成后的效果

### 自动部署

完成以上3个步骤后：

1. **每次推送到`main`分支**
   - GitHub Actions会自动触发部署
   - 构建项目（`npm run build`）
   - 上传到腾讯云COS
   - 部署完成

2. **查看部署状态**
   - 访问：https://github.com/HMC1234/-yqf-aibtrip-demo/actions
   - 查看最新的工作流运行状态

3. **访问部署的网站**
   - COS默认域名：
    ```
    https://<您的存储桶名称>.cos-website.<您的地域>.myqcloud.com
    ```
   - 示例：
    ```
    https://yqf-aibtrip-demo.cos-website.ap-guangzhou.myqcloud.com
    ```

---

## 🧪 测试自动部署

完成配置后，可以通过以下方式测试：

### 方式1：手动触发（推荐）

1. **访问GitHub Actions**
   - https://github.com/HMC1234/-yqf-aibtrip-demo/actions

2. **选择工作流**
   - 点击"Deploy to Tencent Cloud COS"

3. **手动触发**
   - 点击"Run workflow"
   - 选择分支（main）
   - 点击"Run workflow"

4. **查看部署日志**
   - 等待部署完成
   - 查看日志确认是否成功

### 方式2：推送代码触发

```bash
# 做一个小改动（例如修改README）
echo "# 测试部署" >> README.md
git add README.md
git commit -m "test: 测试腾讯云自动部署"
git push origin main
```

---

## ✅ 配置检查清单

### 部署前检查

- [ ] 腾讯云账号已注册并实名认证
- [ ] 已创建COS存储桶
- [ ] 存储桶权限设置为"公有读私有写"
- [ ] 已开启静态网站托管
- [ ] 索引文档设置为`index.html`
- [ ] 错误文档设置为`index.html`
- [ ] 已获取API密钥（SecretId和SecretKey）
- [ ] 已在GitHub仓库添加SecretId（TENCENT_SECRET_ID）
- [ ] 已在GitHub仓库添加SecretKey（TENCENT_SECRET_KEY）
- [ ] 已配置存储桶名称（TENCENT_BUCKET，如果需要）
- [ ] 已配置地域（TENCENT_REGION，如果需要）

### 部署后检查

- [ ] GitHub Actions工作流运行成功
- [ ] 网站可以正常访问
- [ ] 静态资源加载正常
- [ ] SPA路由正常工作（无404错误）

---

## 📚 参考文档

### 详细指南

- **完整部署指南**：`腾讯云部署指南.md`
- **快速步骤**：`腾讯云部署快速步骤.md`
- **简要说明**：`README_腾讯云部署.md`

### 腾讯云官方文档

- **COS控制台**：https://console.cloud.tencent.com/cos
- **COS文档**：https://cloud.tencent.com/document/product/436
- **API密钥管理**：https://console.cloud.tencent.com/cam/capi

### GitHub Actions

- **Actions页面**：https://github.com/HMC1234/-yqf-aibtrip-demo/actions
- **GitHub Actions文档**：https://docs.github.com/en/actions

---

## ❓ 常见问题

### Q1：找不到GitHub Settings

**A**：确保您是仓库的**管理员**或有**写入权限**。

### Q2：找不到Secrets页面

**A**：在仓库设置中，左侧菜单选择"Secrets and variables" → "Actions"。

### Q3：部署失败：认证失败

**A**：
- 检查SecretId和SecretKey是否正确
- 确保没有多余的空格
- 检查密钥是否有COS访问权限

### Q4：网站无法访问

**A**：
- 确保存储桶权限为"公有读私有写"
- 确保静态网站托管已开启
- 等待1-2分钟后重试（DNS传播需要时间）

### Q5：路由404错误

**A**：
- 确保在静态网站设置中，错误文档设置为`index.html`
- 这是SPA（单页应用）必需的配置

---

## 🎯 完成后的下一步

### 可选：配置CDN加速（推荐）

1. **访问CDN控制台**
   - https://console.cloud.tencent.com/cdn

2. **添加加速域名**
   - 选择您的COS存储桶作为源站
   - 配置HTTPS（可使用腾讯云免费证书）

3. **等待部署完成**（约10-30分钟）

4. **更新GitHub Secret**
   - 添加`TENCENT_CDN_DOMAIN`（您的CDN域名）

---

## 📞 需要帮助？

如有问题，请查看：
1. 详细部署指南：`腾讯云部署指南.md`
2. 腾讯云官方文档：https://cloud.tencent.com/document/product/436
3. GitHub Actions文档：https://docs.github.com/en/actions

---

**完成以上3个步骤后，您的代码就会自动部署到腾讯云了！** 🚀

